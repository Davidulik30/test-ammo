[gd_scene load_steps=17 format=3 uid="uid://blmece8g5bmvf"]

[ext_resource type="Script" uid="uid://dd6g1oxq7s448" path="res://game/tanks/tank.gd" id="1_j8din"]
[ext_resource type="Script" uid="uid://du4vhiyjx5a8b" path="res://game/projectiles/shell_type.gd" id="2_frvbd"]
[ext_resource type="Texture2D" uid="uid://byaibv2y1png1" path="res://icon.svg" id="3_18we6"]
[ext_resource type="PackedScene" uid="uid://d3liv7o7emfgk" path="res://game/tanks/lemanruss/TankForEdit.glb" id="3_srpif"]
[ext_resource type="PackedScene" uid="uid://r0865144f5kj" path="res://game/effects/explosion.tscn" id="4_wh0gw"]
[ext_resource type="AudioStream" uid="uid://17na1n3uq2b3" path="res://game/effects/tank_shot.mp3" id="5_t2e0i"]
[ext_resource type="Script" uid="uid://tra820eah0nk" path="res://game/tanks/gun_direction.gd" id="6_ptg8l"]
[ext_resource type="PackedScene" uid="uid://c1hou6p0knntg" path="res://game/tanks/default_tank_UI.tscn" id="7_1dqpg"]

[sub_resource type="Resource" id="Resource_dse1x"]
script = ExtResource("2_frvbd")
display_name = "Shell1"
icon = ExtResource("3_18we6")
metadata/_custom_type_script = "uid://du4vhiyjx5a8b"

[sub_resource type="Resource" id="Resource_frvbd"]
script = ExtResource("2_frvbd")
metadata/_custom_type_script = "uid://du4vhiyjx5a8b"

[sub_resource type="Resource" id="Resource_18we6"]
script = ExtResource("2_frvbd")
metadata/_custom_type_script = "uid://du4vhiyjx5a8b"

[sub_resource type="BoxShape3D" id="BoxShape3D_collision"]
size = Vector3(3.5, 1.2, 6)

[sub_resource type="SeparationRayShape3D" id="SeparationRayShape3D_spring"]
slide_on_slope = true

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_pdeyu"]
shading_mode = 0
albedo_color = Color(0.39656314, 0.6327405, 0.3297208, 1)

[sub_resource type="TorusMesh" id="TorusMesh_8b2wj"]
material = SubResource("StandardMaterial3D_pdeyu")
inner_radius = 0.21
outer_radius = 0.176
rings = 4
ring_segments = 12

[sub_resource type="SceneReplicationConfig" id="SceneReplicationConfig_pdeyu"]
properties/0/path = NodePath(".:position")
properties/0/spawn = true
properties/0/replication_mode = 1
properties/1/path = NodePath(".:rotation")
properties/1/spawn = true
properties/1/replication_mode = 1
properties/2/path = NodePath("TankModel/Tank/Body/Turret:rotation")
properties/2/spawn = true
properties/2/replication_mode = 1
properties/3/path = NodePath("TankModel/Tank/Body/Turret/Barrel/Dulo:rotation")
properties/3/spawn = true
properties/3/replication_mode = 1

[node name="LemanRus" type="VehicleBody3D" node_paths=PackedStringArray("body", "turret", "barrel", "explosion_root", "muzzle_audio", "sight_camera", "regular_camera", "spawn_shell")]
mass = 2000.0
script = ExtResource("1_j8din")
body = NodePath("TankModel/Tank/Body")
turret = NodePath("TankModel/Tank/Body/Turret")
barrel = NodePath("TankModel/Tank/Body/Turret/Barrel")
explosion_root = NodePath("TankModel/Tank/Body/Turret/Barrel/Dulo/spawn shell/Explosion")
muzzle_audio = NodePath("TankModel/Tank/Body/Turret/Barrel/Dulo/spawn shell/MuzzleAudio")
sight_camera = NodePath("SightCamera")
regular_camera = NodePath("RegularCamera")
shell_types = Array[ExtResource("2_frvbd")]([SubResource("Resource_dse1x"), SubResource("Resource_frvbd"), SubResource("Resource_18we6")])
projectile_damage = null
projectile_type = null
spawn_shell = NodePath("TankModel/Tank/Body/Turret/Barrel/Dulo/spawn shell")
max_health = 200
shoot_force = 50.0
recoil_force = 5000.0
turret_rotation_speed = 60.0
barrel_pitch_speed = 25.0
max_barrel_angle_up = 20.0
max_barrel_angle_down = -7.0
reload_time = 4.0
engine_force_value = null
turn_force_value = null
brake_force_value = null
camera_sensitivity = null
camera_pitch_limits = null
camera_distance = 15.0
camera_focus_height = 1.0
camera_height_offset = 5.0
aim_ray_length = null
sight_mouse_sensitivity = 0.001
sight_yaw_range_deg = 360.0
sight_pitch_up_deg = null
sight_pitch_down_deg = null
sight_invert_y = null
sight_invert_x = null
sight_turret_rotation_speed = null
sight_barrel_pitch_speed = null
show_zoom_label = null
camera_min_distance = null
camera_max_distance = null
camera_zoom_step = null
sight_min_fov = null
sight_max_fov = null
sight_fov_step = null

[node name="SightCamera" type="Camera3D" parent="."]
transform = Transform3D(-1, 0, -8.742278e-08, 0, 1, 0, 8.742278e-08, 0, -1, -0.009334326, 3.1647477, 0.0061159134)
fov = 35.0

[node name="RegularCamera" type="Camera3D" parent="."]
transform = Transform3D(-1, 0, -8.742278e-08, 0, 1, 0, 8.742278e-08, 0, -1, 0.06293082, 8.989875, -14.854139)
current = true

[node name="CollisionShape3D" type="CollisionShape3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.6, 0)
shape = SubResource("BoxShape3D_collision")

[node name="TankModel" parent="." instance=ExtResource("3_srpif")]
transform = Transform3D(4, 0, 0, 0, 4, 0, 0, 0, 4, 0, 0, 0)

[node name="spawn shell" type="Marker3D" parent="TankModel/Tank/Body/Turret/Barrel/Dulo" index="0"]
transform = Transform3D(0, 0, -1, -1, 0, 0, 0, 1, 0, 0.0054079294, 0, 0.18831623)

[node name="Explosion" parent="TankModel/Tank/Body/Turret/Barrel/Dulo/spawn shell" instance=ExtResource("4_wh0gw")]

[node name="MuzzleAudio" type="AudioStreamPlayer3D" parent="TankModel/Tank/Body/Turret/Barrel/Dulo/spawn shell"]
transform = Transform3D(0, -0.25, 0, 0, 0, 0.25, -0.25, 0, 0, 0, 0, 0)
stream = ExtResource("5_t2e0i")

[node name="SightSpringArm" type="SpringArm3D" parent="TankModel/Tank/Body/Turret/Barrel/Dulo/spawn shell" node_paths=PackedStringArray("aim", "sightaim", "crosshair", "marker_3d")]
transform = Transform3D(1, 0, 0, 0, 0, 1, 0, -1, 0, -0.023919523, -0.0049678087, 0.002391981)
collision_mask = 129
shape = SubResource("SeparationRayShape3D_spring")
spring_length = 500.0
script = ExtResource("6_ptg8l")
aim = NodePath("../../../../../../../../TankUI/aim")
sightaim = NodePath("../../../../../../../../TankUI/sightaim")
crosshair = NodePath("../../../../../../../../TankUI/crosshair")
marker_3d = NodePath("Marker3D")

[node name="Marker3D" type="Marker3D" parent="TankModel/Tank/Body/Turret/Barrel/Dulo/spawn shell/SightSpringArm"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 5)

[node name="MeshInstance3D" type="MeshInstance3D" parent="TankModel/Tank/Body/Turret/Barrel/Dulo/spawn shell/SightSpringArm/Marker3D"]
transform = Transform3D(1, 0, 0, 0, -4.371139e-08, -1, 0, 1, -4.371139e-08, 0, 0, 0)
mesh = SubResource("TorusMesh_8b2wj")

[node name="right" type="VehicleWheel3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -1.8, 0.48835003, 0)
use_as_traction = true

[node name="left" type="VehicleWheel3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 1.8, 0.48835003, 0)
use_as_traction = true

[node name="MultiplayerSynchronizer" type="MultiplayerSynchronizer" parent="."]
replication_config = SubResource("SceneReplicationConfig_pdeyu")

[node name="TankUI" parent="." instance=ExtResource("7_1dqpg")]

[node name="Control" parent="TankUI" index="0"]
metadata/_edit_use_anchors_ = true

[editable path="TankModel"]
[editable path="TankModel/Tank/Body/Turret/Barrel/Dulo/spawn shell/Explosion"]
[editable path="TankUI"]
